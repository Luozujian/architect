### 功能篇
#### 1. redis有几种过期键删除策略？(3_2023_11_29)
1. 定时删除
2. 过期删除
3. 定期删除

#### 2. 定时删除是如何实现的？(3_2023_11_29)
在设置key的过期时间时，同时为每个key设置一个定时事件，当时间达到时，由事件处理器自动执行key的删除策略

#### 3. 定时删除策略的优点？(3_2023_11_29)
时间一到就删除数据，消耗CPU资源，但可以保证内存被尽快释放

#### 4. 惰性删除是如何实现的？ (3_2023_11_29)
不主动删除过期键，只有在访问的时候，发现过期了才删除

#### 5. 惰性删除的优缺点？ (2_2023_11_29)
每次访问key的时候，才决定删除还是不删除，cpu资源消耗小，内存中会存在很多过期的键，浪费内存资源

#### 6. 定期删除实现？(2_2023_11_29)
随机从数据库中抽选一部分key，然后把过期的删除，通过配置删除的时长和频率，来控制对CPU资源的影响

#### 7. 定期删除如何实现？ (3_2023_11_29)
通过配置确定每秒执行次数默认10次，以及每次最长执行时长25ms，然后每次随机选择n个key，如果过期key的占比超过25%则继续抽查，
否则结束本轮抽查，如果抽查时长超过25ms，则强制结束。

#### 8. 如果不设置最大内存会怎么样？ (3_2023_11_29)
不进行内存检查，哪怕超过了机器的内存也不管，直到实例崩溃

#### 9. redis的内存淘汰策略有几种? (2_2023_11_29)

8种，可以分为不进行数据淘汰和进行数据淘汰，不进行数据淘汰是默认策略，内存达到上限之后，不允许写入。
进行数据淘汰:
1. 过期键 => lru，random，ttl，lfu
2. 所有键 => lru，random，lfu

#### 10. LRU和LFU有什么区别？ (2_2023_11_29)
LRU: Least Recently Used，最近最少使用，很久不用了，还被使用的概率就很低，就可以进行淘汰
LFU: Least Frequently Used，最近最不常用，用于解决LRU的缓存污染问题，就一下子读了很多数据，导致之前常用的数据背舍弃


#### 11. redis是如何实现LRU的？ (2_2023_11_29)
redisObject有一个最近访问时间的字段，redis 并没有实现一个严格的LRU，因为实现一个严格的LRU需要很大的额外空间，redis实现的是近似LRU，当需要进行内存淘汰的时候，随机抽取部分key，按照最近访问时间排序，然后删除

#### 12. lfu是如何实现的？  (2_2023_11_29)
lfu是服用lru记录时间的字段，用16位来记录时间，8位来记录热度值，然后按照热度值来排序，进行淘汰。




参考资料:
1. [ ] [Redis 过期删除策略和内存淘汰策略有什么区别？](https://www.xiaolincoding.com/redis/module/strategy.html#%E8%BF%87%E6%9C%9F%E5%88%A0%E9%99%A4%E7%AD%96%E7%95%A5)
