# paxos协议

#### 1. 什么是paxos协议？ （2_20241218）
paxos协议是一种共识算法，其用于使得集群快速达到一致状态，比如本轮两个数据同时提交了，集群该接收那个数据。


#### 2. paxos协议节点有几种角色？  （2_20241218）
paxos 设定了三种角色，分别是

1. 提案者(leader)：提出本轮的方案
2. 接受者(accepter): 对方案进行投票
3. 学习者(learner): 对决策好的方案进行学习

paxos允许节点同时拥有多个角色

#### 3. paxos决策过程？ （2_20241218）
![image](https://github.com/user-attachments/assets/e898ed80-4679-45c2-8ebe-bb2d37801230)



paxos决策分为三个过程:

1. prepare 准备阶段:

提案者: 准备一个提案编号 + 提案内容，发送给各个接受者

接受者: 如果本轮以及确定了提案，这返回确定的提案，如果当前未响应提案，则响应该提案，如果当前提案编号大于老提案编号，这响应当前提案，并且把已响应提案改成当前提案

提案被半数接受者响应，就会开启第二阶段，Accepter接收阶段

2. Accepter接收阶段：

提案者: 向所有接受者发送提案

接受者: 向编号大于等于已响应提案编号发出确认

当提案被半数接收者同意，就会把当前提案发给学习者学习


#### 4. paoxs 问题? （2_20241218）
1. 可能陷入死循环，方案长期得不到确认
2. 单决策，还要经过parepre和accepter两个过程，效率较低

prepare 阶段的作用，就是在有多个提案的情况下确定本轮接收那个提案，那如果以开始就只有一个提案者呢，那就可以省略掉parepre阶段，只需要发起accapter请求即可

那multi-paxos算法就是只需要一个提案者，但是却允许脑裂的时候出现两个提案者，编程paxos算法






参考资料:
https://juejin.cn/post/7356114363882061863
