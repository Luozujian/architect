# cap理论+base理论
#### 1.如何理解CAP理论？（3_20241218）
CAP理论指的是，在有状态的分布式系统中，一致性、可用性和分区容错性这三个基本要求，最多只能同时满足两个

#### 2.那什么是一致性、可用性和分区容错性？（3_20241218）
**一致性:** 集群中每个节点对外可见的数据一致

**可用性:** 集群内部出现错误，仍然可以对外提供非错响应，无需保证数据一致性

**分区容错性：** 集群出现网络分区时，仍然可对外提供满足可用性或者一致性的服务 

#### 3. 如何选择C、A、P？ （3_20241218）
首先网络是不可靠的，分区容错性是一定要满足的，不能一出现分区集群就不可用，更多的是在CA之间做抉择

对一致性要求高于可用性的应用场景选择CP，比如转账场景，数据库集群可以牺牲效率和可用性来保证一致性，避免订单丢失，产生舆论风险

对可用性要求较高的场景选择AP，比如频控场景，频控本身就允许出现一定统计上的误差，极端情况出现数据不一致也并不影响系统可用性

#### 4. 如何理解BASE理论？ （2_20241217）
BASE理论是分布式系统中ACID的替代品，其提出分布式系统的三个概念

1. BA (basic available基本可用): 当集群出现非预期故障时，要保障基本可用性，允许牺牲非核心功能的可用性来保障核心功能的可用性，允许熔断降级，返回错误提示，但是决不能系统直接崩溃
2. S (soft status软状态)，，指分布式系统允许出现中间态，但中间态不能影响系统基本可用性。比如库存与订单，正常情况下，库存减一，订单就一定要加一，这是ACID的一致性，但是库存和订单分布在两个不同的库里面，无法通过ACID来保障一致性，可能通过分布式事务来保障一致性，就会出现，库存减一，但是订单没有加一的中间态
3. E (eventually consistent 最终一致): 随着程序运行，会达到最终一致的状态。要么订单不变，库存不变，要么库存减一，订单加一


#### 5. 分布式集群分类？（2_20241217）
逻辑计算集群，无状态，天然支持水平扩容
存储集群，有状态，需要在ca中做抉择
存储集群架构逻辑: 目前中间件的主流架构是主从 + 多分片，比如redis，kafka



参考资料:
