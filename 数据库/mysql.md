# mysql基础知识

#### 1. 数据库有那几个隔离级别？ (2_2024_02_25)

1. 读未提交，存在胀读、不可重复读、幻读
2. 读已提交，不可重复读、幻读
3. 可重复读，可重复读 + 间隙锁 解决 大部分幻读问题
4. 串行化，无问题

#### 2. 什么是脏读、不可重复读、幻读？ (2_2024_02_25)
脏读: 能读到其他事物还未提交的数据 (其他事物可能会回滚)

不可重复读: 一个事物内，同一条数据在不通查询中返回的结果不一样

幻读: 一个事物内不同的查询时间点，对同一条件的查询，返回的结果集不同


#### 3. 什么是两类丢失?  (2_2024_02_25)
第一类丢失: 回滚操作覆盖其他事物提交的数据
第二类丢失: 提交操作覆盖其他事物提交的数据

解决方案:
1. 悲观锁: 加互斥锁 select for update (并发量较大)
2. 乐关锁: 加版本号 （并发量较小）

#### 4. 什么是当前读和快照读？  (2_2024_02_25)

当前读: 读取记录的最新版本，select in share mod，select for udpate，select for delete， update、insert、delete 这些操作都会触发一次当前读

快照读: 就是根据事物的Read View去读取当前事物id可见的记录，普通的select语句触发快照读



#### 5. 记录有那三个隐藏字段？  (2_2024_02_25)
1. DB_ROW_ID， 6B 隐藏的自增ID，如果表没有主键以及唯一键来生成聚簇索引，就会使用DB_ROW_ID来生成聚簇索引
2. DB_TRX_ID，6B 事物ID，表示最后一次修改/删除这条记录的事物ID
3. BD_ROLL_PTR，7B，指向该记录的上一个版本(存储在undo日志里面)的指针

#### 6. 简介一下undo.log日志？  (2_2024_02_25)

undo.log 日志分为两种分别是 insert undo log和update undo log

insert undo log: 代表事物在insert新记录时产生的undo log，只有在会滚的时候需要，事物提交即可丢弃

update undo log:














参考资料:
1. [ ] [数据库第一类第二类丢失更新](https://blog.csdn.net/paopaopotter/article/details/79259686)

